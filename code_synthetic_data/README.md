# Experiments on synthetic data

## How to run the experiments

The files in this folder allow reproducing the experiments presented in the paper. These experiments were run on a computing cluster using the SLURM command syntax. Each experiment folder contains 4 files, which perform similar operations. For instance, for experiment E1:

- `E1.py` simulates a single random data set and performs parameter estimation
- `run_E1_slurm.sh` defines a SLURM job which runs `E1.py` on a given random seed and a specific set of model parameters
- `run_E1.sh` launches a large series of SLURM jobs defined by `run_E1_slurm.sh`
- `E1_read.py` reads all the result files generated by the multiple executions of E1.py and summarizes then in a single multidimensional xarray stored in a file.

On a SLURM cluster, the whole experiment E1 can be launched with `sh run_E1.sh`. If not on a SLURM cluster, each sub-experiment in experiment E1 must be run manually, by calling `python E1.py` with every possible value of its argument `-s`. The argument is given as a sequence of integers ; each integer gives the index of a specific parameter in the parameter grid. For instance, `python E1.py -s 0 0 0 0 0 0 0` will run the script for the first value in the parameter grid.

**Important**: The estimation results is stored in the environment variable `B`. It must be set prior to running the experiments, e.g. with the command `export B=".../estimation_result"`. When running experiments on a SLURM cluster, the `chdir` and `partition` options must be defined in the SLURM scripts.

## Experiments description

- E1: non-noisy BOA data, with wide parameter ranges for N, T and H.
- E21: non-noisy BOA data, on a larger range of p_ext values, and less values of N, T and H.
- E22: non-noisy BOA data, with a fine p_ext interval centered around p_c(H) (i.e., for each value of H, the values taken by p_ext cover a small interval around p_c(H)). The results of E21 and E22 are combined in the paper.
- E3: noisy BOA data, which adds the eps variable.
- E41 & E42: same than E21 and E22 for the noisy BOA.
- E5, E6 & E7: experiments on small parameter grids, comparing BOA vs. noisy BOA when adding respectively exernal colonization (E5), false positives (E6) or false negatives (E7).
- E8: same as E3 on multiple streets, with a varying number of street count.

## How to produce the figures

The final results of all the synthetic data experiments is provided in the `results` folder. These results can be turned into the figures used in the paper by running the script `figures_synthetic_data.py`.